{% comment %}
  I18n Initialization Component
  Include this once at the start of any page/layout to initialize i18n variables
  Usage: {% include i18n-init.html %}
{% endcomment %}

{% comment %} Set up translation variables {% endcomment %}
{% assign t = site.data.translations[page.lang] %}
{% assign current_lang = page.lang | default: 'en' %}
{% assign languages = site.data.languages %}

{% comment %} Set up alternate language links {% endcomment %}
{% if page.ref %}
  {% assign pages_with_ref = site.pages | where: "ref", page.ref %}
  {% for lang_data in languages %}
    {% assign lang_code = lang_data[0] %}
    {% if lang_code != current_lang %}
      {% assign alternate_page = pages_with_ref | where: "lang", lang_code | first %}
      {% if alternate_page %}
        {% assign alternate_url = alternate_page.url %}
      {% else %}
        {% assign alternate_url = "/" | append: lang_code | append: "/" %}
      {% endif %}
    {% endif %}
  {% endfor %}
{% endif %}

{% comment %} Set language-specific meta variables {% endcomment %}
{% if current_lang == 'zh' %}
  {% assign og_locale = 'zh_CN' %}
  {% assign html_lang = 'zh-CN' %}
  {% assign date_format = '%Y年%m月%d日' %}
{% else %}
  {% assign og_locale = 'en_US' %}
  {% assign html_lang = 'en' %}
  {% assign date_format = '%B %d, %Y' %}
{% endif %}
