<!DOCTYPE html>
<html lang="{{ page.lang | default: 'en' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
    {% seo %}
    <!-- Core styles -->
    <link rel="stylesheet" href="{{ '/assets/css/variables.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/header.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/footer.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/buttons.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/cards.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/layouts.css' | relative_url }}">
    <!-- Game detail specific -->
    <link rel="stylesheet" href="{{ '/assets/css/game-detail.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/utilities.css' | relative_url }}">
    {% feed_meta %}
</head>
<body>
    {% include header.html %}
    
    <main class="content">
        {% assign game = site.data.games | where: "id", page.game_id | first %}
        
        <section class="game-detail-header">
            <div class="container">
                <a href="/{{ page.lang }}/games/" class="breadcrumb">
                    ← {{ page.translations.back_to_games }}
                </a>
                <h1>{{ game.title[page.lang] }}</h1>
                <p class="game-release">{{ page.translations.released }}: {{ game.release_date | date: "%B %d, %Y" }}</p>
            </div>
        </section>

        <section class="game-detail-content">
            <div class="container">
                <!-- 游戏画面容器 -->
                <div class="game-display">
                    <div class="game-iframe-container">
                        <iframe 
                            src="{{ game.path }}" 
                            title="{{ game.title[page.lang] }}"
                            allowfullscreen
                            allow="fullscreen"></iframe>
                    </div>
                    <!-- 全屏按钮 -->
                    <button class="fullscreen-btn" onclick="toggleGameFullscreen()" aria-label="Toggle fullscreen" title="Full screen">⛶</button>
                </div>
                
                <!-- 游戏信息面板 -->
                <div class="game-info-grid">
                    <!-- 游戏简介卡片 -->
                    <div class="game-info-card game-about-card">
                        <h2>{{ page.translations.about }}</h2>
                        <p>{{ game.description[page.lang] }}</p>
                    </div>

                    <!-- 更多信息折叠区域 -->
                    <div class="game-info-card game-more-info-card">
                        <details class="more-info-details">
                            <summary class="more-info-summary">
                                <span class="summary-text">{{ page.translations.more_info_toggle }}</span>
                                <span class="toggle-icon">▶</span>
                            </summary>
                            <div class="more-info-content">
                                <!-- 标签 -->
                                {% if game.tags %}
                                <div class="info-item">
                                    <strong>{{ page.translations.tags }}</strong>
                                    <div class="tags">
                                        {% for tag in game.tags %}
                                        <span class="tag">{{ tag }}</span>
                                        {% endfor %}
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if game.more_info %}
                                {% if game.more_info.developer %}
                                <div class="info-item">
                                    <strong>Developer:</strong>
                                    <p>{{ game.more_info.developer }}</p>
                                </div>
                                {% endif %}
                                
                                {% if game.more_info.engine %}
                                <div class="info-item">
                                    <strong>Engine:</strong>
                                    <p>{{ game.more_info.engine }}</p>
                                </div>
                                {% endif %}
                                
                                {% if game.more_info.playtime %}
                                <div class="info-item">
                                    <strong>Average Playtime:</strong>
                                    <p>{{ game.more_info.playtime }}</p>
                                </div>
                                {% endif %}
                                
                                {% if game.more_info.platforms %}
                                <div class="info-item">
                                    <strong>Platforms:</strong>
                                    <div class="platform-list">
                                        {% for platform in game.more_info.platforms %}
                                        <span class="platform-badge">{{ platform }}</span>
                                        {% endfor %}
                                    </div>
                                </div>
                                {% endif %}
                                {% endif %}
                            </div>
                        </details>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    {% include footer.html %}
    
    <script src="{{ '/assets/js/main.js' | relative_url }}"></script>
    <script src="{{ '/assets/js/game-detail.js' | relative_url }}"></script>
</body>
</html>
