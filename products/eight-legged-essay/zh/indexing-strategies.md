---
title: "数据库索引：提高查询性能"
description: "探索数据库索引技术、B 树结构、查询优化和大规模改进数据库性能的策略。"
tags: ["databases"]
---

# 数据库索引：提高查询性能

## 简介

数据库索引是优化查询性能的最重要工具之一。正确的索引可以将查询时间从秒级降低到毫秒级。

## 索引类型

### 1. 主键索引
- 自动创建
- 确保唯一性
- 决定数据的物理顺序
- 通常是聚集索引

### 2. 二级索引
- 在非主键列创建
- 改善搜索性能
- 可以是非聚集索引

### 3. 复合索引
- 在多列创建
- 对多字段过滤查询有用
- 顺序非常重要

### 4. 唯一索引
- 确保值的唯一性
- 防止重复条目
- 改善约束检查

## 索引结构：B-Tree

大多数数据库使用 B-Tree 结构：
- 自平衡
- 对范围查询高效
- O(log n) 搜索时间
- 最小化磁盘 I/O

## 何时建索引

### 应该索引：
- 频繁用于 WHERE 子句的列
- 用于 JOIN 条件的列
- 用于 ORDER BY 的列
- 外键列

### 不应该索引：
- 低基数列（唯一值少）
- 小表中的列
- 很少查询的列
- 含有大量 NULL 值的列

## 索引权衡

| 优点 | 缺点 |
|------|------|
| 更快的 SELECT 查询 | 更慢的 INSERT/UPDATE/DELETE |
| 更快的排序 | 额外磁盘空间 |
| 更快的 JOIN | 索引维护开销 |

## 最佳实践

1. 监控查询性能
2. 使用 EXPLAIN 分析查询计划
3. 删除未使用的索引
4. 定期更新统计信息
5. 考虑为常见查询模式创建复合索引

## 总结

索引对数据库性能至关重要。但索引应谨慎使用，因为它们带来维护成本。
