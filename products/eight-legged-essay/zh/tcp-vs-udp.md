---
title: "网络协议：理解 TCP vs UDP"
tags: ["networking"]
---

# 网络协议：理解 TCP vs UDP

## 简介

网络协议是互联网通信的基础。理解 TCP 和 UDP 对于开发网络应用至关重要。

## TCP（传输控制协议）

### 特性
- **面向连接**: 数据转移前建立连接
- **可靠**: 保证数据按顺序交付
- **有序**: 维护数据包序列
- **流量控制**: 管理数据速率

### 功能
- 三次握手建立连接
- 错误检查和纠正
- 自动重传丢失的数据包
- 确认机制

### 使用场景
- 电子邮件（SMTP, POP3）
- 网页浏览（HTTP/HTTPS）
- 文件传输（FTP）
- 远程访问（SSH, Telnet）

### 优点
- 保证交付
- 顺序保留
- 连接状态跟踪
- 流量控制和拥塞管理

### 缺点
- 速度较慢（确认开销）
- 资源消耗更多
- 连接建立慢
- 延迟更高

## UDP（用户数据报协议）

### 特性
- **无连接**: 无需连接设置
- **不可靠**: 不保证交付
- **快速**: 最小开销
- **无状态**: 不维护连接状态

### 功能
- 无需握手
- 最小错误检查
- 无重传机制
- 低延迟

### 使用场景
- 视频/音频流
- 在线游戏
- DNS 查询
- VoIP
- IoT 应用

### 优点
- 快速且低延迟
- 低开销
- 适合实时应用
- 资源消耗少

### 缺点
- 不保证交付
- 不保证顺序
- 无流量控制
- 应用必须处理错误

## 对比表

| 特性 | TCP | UDP |
|------|-----|-----|
| 连接 | 面向连接 | 无连接 |
| 可靠性 | 保证 | 尽力而为 |
| 速度 | 较慢 | 较快 |
| 顺序 | 保证 | 无保证 |
| 流量控制 | 有 | 否 |
| 使用场景 | 准确性关键 | 实时性关键 |

## 混合方法

### QUIC
- 结合 TCP 和 UDP 的优点
- 更快的连接建立
- 内置加密
- 多路复用支持

### 自定义协议
- 基于 UDP 构建
- 仅实现需要的可靠性
- 优化特定用例

## 总结

对于准确性关键的应用选择 TCP，对于实时低延迟应用选择 UDP。QUIC 等现代协议提供混合优势。
